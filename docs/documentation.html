

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Introduction &mdash; AxonDeepSeg 0.3 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="AxonDeepSeg 0.3 documentation" href="index.html"/>
        <link rel="prev" title="Welcome to AxonDeepSeg !" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> AxonDeepSeg
          

          
            
            <img src="_static/logo2.png" class="logo" />
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="#installation">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#python">Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="#virtualenv">Virtualenv</a></li>
<li class="toctree-l2"><a class="reference internal" href="#axondeepseg">AxonDeepSeg</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#option-1-installing-axondeepseg-in-application-mode-stable-release">Option 1: Installing AxonDeepSeg in application mode (stable release)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#option-2-installing-axondeepseg-in-development-mode-from-github">Option 2: Installing AxonDeepSeg in development mode (from GitHub)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#testing-the-installation">Testing the installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#existing-models">Existing models</a></li>
<li class="toctree-l1"><a class="reference internal" href="#getting-started">Getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#example-dataset">Example dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="#syntax">Syntax</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#segment-a-single-image">Segment a single image</a></li>
<li class="toctree-l3"><a class="reference internal" href="#segment-multiple-images-of-the-same-resolution">Segment multiple images of the same resolution</a></li>
<li class="toctree-l3"><a class="reference internal" href="#segment-images-from-multiple-folders">Segment images from multiple folders</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#jupyter-notebooks">Jupyter notebooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#help">Help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#manual-correction">Manual correction</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#citation">Citation</a></li>
<li class="toctree-l1"><a class="reference internal" href="#licensing">Licensing</a></li>
<li class="toctree-l1"><a class="reference internal" href="#contributors">Contributors</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">AxonDeepSeg</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Introduction</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/documentation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>AxonDeepSeg is an open-source software using deep learning and aiming at automatically segmenting axons and myelin
sheaths from microscopy images. It performs 3-class semantic segmentation using a convolutional neural network.</p>
<p>AxonDeepSeg was developed by NeuroPoly, the neuroimagery laboratory of Polytechnique Montréal.</p>
</div>
<div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>The following lines will help you install all you need to ensure that AxonDeepSeg is working. Test data and
instructions are provided to help you use AxonDeepSeg.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">AxonDeepSeg is not compatible with Windows due to third-party dependencies.
AxonDeepSeg was tested with Mac OS and Linux.</p>
</div>
<div class="section" id="python">
<h2>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h2>
<p>First, you should make sure that Python 2.7 is installed on your computer. Run the following command in the terminal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">V</span>
</pre></div>
</div>
<p>The version of python should be displayed in the terminal. If not, you have to install Python 2.7 on your computer.
To do that, you can follow the instructions given on
<a class="reference external" href="https://wiki.python.org/moin/BeginnersGuide/Download">the official python wiki</a>.</p>
</div>
<div class="section" id="virtualenv">
<h2>Virtualenv<a class="headerlink" href="#virtualenv" title="Permalink to this headline">¶</a></h2>
<p><cite>Virtualenv</cite> is a Python package that allows you to create virtual environments where
you can sandbox environments with different package versions without affecting
your system packages. If you don’t have it installed, please follow the instructions
from the <a class="reference external" href="https://virtualenv.pypa.io/en/stable/installation/">virtualenv website</a>.</p>
<p>Before installing AxonDeepSeg, we will need to set up a virtual environment.
A virtual environment is a tool that lets you install specific versions of the python modules you want.
It will allow AxonDeepSeg to run with respect to its module requirements,
without affecting the rest of your python installation.</p>
<p>First, navigate to your home directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~</span>
</pre></div>
</div>
<p>We will now create a virtual environment. For clarity, we will name it ads_venv:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">virtualenv</span> <span class="n">ads_venv</span>
</pre></div>
</div>
<p>To activate it, run the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="n">ads_venv</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
</pre></div>
</div>
<p>If you performed all the steps correctly, your username in the console should now be preceded by the name of your
virtual environment between parenthesis, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">ads_venv</span><span class="p">)</span> <span class="n">username</span><span class="nd">@hostname</span> <span class="o">/</span><span class="n">home</span><span class="o">/...</span>
</pre></div>
</div>
</div>
<div class="section" id="axondeepseg">
<h2>AxonDeepSeg<a class="headerlink" href="#axondeepseg" title="Permalink to this headline">¶</a></h2>
<div class="section" id="option-1-installing-axondeepseg-in-application-mode-stable-release">
<h3>Option 1: Installing AxonDeepSeg in application mode (stable release)<a class="headerlink" href="#option-1-installing-axondeepseg-in-application-mode-stable-release" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Make sure that the virtual environment is activated before you run the following command.</p>
</div>
<p>We are now going to install the software AxonDeepSeg.</p>
<p>To install the latest stable release of AxonDeepSeg, you just need to install it with <code class="docutils literal notranslate"><span class="pre">pip</span></code> using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">axondeepseg</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Note that you can install a specific version of the software as follows (replace X.X with the version number, for example 0.2):</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">axondeepseg</span><span class="o">==</span><span class="n">X</span><span class="o">.</span><span class="n">X</span>
</pre></div>
</div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>If you experience the following error:
“Could not find a version that satisfies the requirement tensorflow&gt;=XXX (from axondeepseg) (from versions: )… “,
you will need to manually install the TensorFlow dependency.</p>
<p>For OS X users, run the following command to install TensorFlow 1.3.0:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">storage</span><span class="o">.</span><span class="n">googleapis</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">tensorflow</span><span class="o">/</span><span class="n">mac</span><span class="o">/</span><span class="n">cpu</span><span class="o">/</span><span class="n">tensorflow</span><span class="o">-</span><span class="mf">1.3</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">py2</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="nb">any</span><span class="o">.</span><span class="n">whl</span>
</pre></div>
</div>
<p>For Linux users, run the following command to install TensorFlow 1.3.0:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">storage</span><span class="o">.</span><span class="n">googleapis</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">tensorflow</span><span class="o">/</span><span class="n">linux</span><span class="o">/</span><span class="n">cpu</span><span class="o">/</span><span class="n">tensorflow</span><span class="o">-</span><span class="mf">1.3</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">cp34</span><span class="o">-</span><span class="n">cp34m</span><span class="o">-</span><span class="n">linux_x86_64</span><span class="o">.</span><span class="n">whl</span>
</pre></div>
</div>
<p>You can get more information by following the instructions from the <a class="reference external" href="https://www.tensorflow.org/install/install_mac#the_url_of_the_tensorflow_python_package">TensorFlow website</a>.</p>
<p><strong>Once TensorFlow is installed, re-run the pip command:</strong></p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">axondeepseg</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="option-2-installing-axondeepseg-in-development-mode-from-github">
<h3>Option 2: Installing AxonDeepSeg in development mode (from GitHub)<a class="headerlink" href="#option-2-installing-axondeepseg-in-development-mode-from-github" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Make sure that the virtual environment is activated before you run the following command.</p>
</div>
<p>To install AxonDeepSeg in development mode, you first need to clone the AxonDeepSeg repository using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">neuropoly</span><span class="o">/</span><span class="n">axondeepseg</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>Then, go to the newly created git repository and install the AxonDeepSeg package using the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">axondeepseg</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>To update an already cloned AxonDeepSeg package, pull the latest version of the project from GitHub and re-install the application:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">axondeepseg</span>
<span class="n">git</span> <span class="n">pull</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span>
</pre></div>
</div>
</div>
<p>The advantage of this installation method over the option 1 (application mode) is that you will always get the last stable version of the package.</p>
</div>
</div>
<div class="section" id="testing-the-installation">
<h2>Testing the installation<a class="headerlink" href="#testing-the-installation" title="Permalink to this headline">¶</a></h2>
<p>In order to test the installation, you can launch an integrity test by running the following command on the terminal (make sure your virtual env is activated before, as explained in the <a class="reference external" href="https://neuropoly.github.io/axondeepseg/documentation.html#creating-a-virtual-environment">Creation a virtual environment</a> section):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">axondeepseg_test</span>
</pre></div>
</div>
<p>This integrity test automatically performs the axon and myelin segmentation of a test sample. If the test succeeds, the following message will appear in the terminal, meaning that the software was correctly installed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">*</span> <span class="o">*</span> <span class="o">*</span> <span class="n">Integrity</span> <span class="n">test</span> <span class="n">passed</span><span class="o">.</span> <span class="n">AxonDeepSeg</span> <span class="ow">is</span> <span class="n">correctly</span> <span class="n">installed</span><span class="o">.</span> <span class="o">*</span> <span class="o">*</span> <span class="o">*</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="existing-models">
<h1>Existing models<a class="headerlink" href="#existing-models" title="Permalink to this headline">¶</a></h1>
<p>Two models are available and shipped together with the installation package, so you don’t need to install them separately.
The two models are described below:</p>
<ul class="simple">
<li>A SEM model, that works at a resolution of 0.1 micrometer per pixel.</li>
<li>A TEM model, that works at a resolution of 0.01 micrometer per pixel.</li>
</ul>
</div>
<div class="section" id="getting-started">
<h1>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<div class="section" id="example-dataset">
<h2>Example dataset<a class="headerlink" href="#example-dataset" title="Permalink to this headline">¶</a></h2>
<p>You can test AxonDeepSeg by downloading the test data available <a class="reference external" href="https://osf.io/rtbwc/download">here</a>. It contains two SEM test samples and one TEM test sample.</p>
</div>
<div class="section" id="syntax">
<h2>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h2>
<p>The script to launch is called <strong>axondeepseg</strong>. It takes several arguments:</p>
<p><strong>Required arguments:</strong></p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-t <var>MODALITY</var></span></kbd></td>
<td>Type of acquisition to segment.
SEM: scanning electron microscopy samples.
TEM: transmission electron microscopy samples.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-i <var>IMGPATH</var></span></kbd></td>
<td>Path to the image to segment or path to the folder where the image(s) to segment is/are located.</td></tr>
</tbody>
</table>
<p><strong>Optional arguments:</strong></p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-m <var>MODEL</var></span></kbd></td>
<td>Folder where the model is located.
The default SEM model path is <strong>default_SEM_model_v1</strong>.
The default TEM model path is <strong>default_TEM_model_v1</strong>.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-s <var>SIZEPIXEL</var></span></kbd></td>
<td>Pixel size of the image(s) to segment, in micrometers.
If no pixel size is specified, a <strong>pixel_size_in_micrometer.txt</strong> file needs to be added to the image folder path ( that file should contain a single float number corresponding to the resolution of the image, i.e. the pixel size). The pixel size in that file will be used for the segmentation.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-v <var>VERBOSITY</var></span></kbd></td>
<td>Verbosity level.
<strong>0</strong> (default) : Displays the progress bar for the segmentation.
<strong>1</strong>: Also displays the path of the image(s) being segmented.
<strong>2</strong>: Also displays the information about the prediction step for the segmentation of current sample.
<strong>3</strong>: Also displays the patch number being processed in the current sample.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-o <var>OVERLAP</var></span></kbd></td>
<td>Overlap value (in pixels) of the patches when doing the segmentation.
Higher values of overlap can improve the segmentation at patch borders, but also increase the segmentation time. Default value: 25. Recommended range of values: [10-100].</td></tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>You can get the detailed description of all the arguments of the <strong>axondeepseg</strong> command at any time by using the <strong>-h</strong> argument:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">axondeepseg</span> <span class="o">-</span><span class="n">h</span>
</pre></div>
</div>
</div>
<div class="section" id="segment-a-single-image">
<h3>Segment a single image<a class="headerlink" href="#segment-a-single-image" title="Permalink to this headline">¶</a></h3>
<p>To segment a single microscopy image, specify the path to the image to segment in the <strong>-i</strong> argument. For instance, to segment the SEM image <strong>‘77.png’</strong> of the test dataset that has a pixel size of 0.07 micrometers, use the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">axondeepseg</span> <span class="o">-</span><span class="n">t</span> <span class="n">SEM</span> <span class="o">-</span><span class="n">i</span> <span class="n">test_segmentation</span><span class="o">/</span><span class="n">test_sem_image</span><span class="o">/</span><span class="n">image1_sem</span><span class="o">/</span><span class="mf">77.</span><span class="n">png</span> <span class="o">-</span><span class="n">s</span> <span class="mf">0.07</span>
</pre></div>
</div>
<p>The script will use the explicitely specified size argument (here, 0.07) for the segmentation. If no pixel size is provided in the arguments, it will automatically read the image resolution encoded in the file <strong>‘pixel_size_in_micrometer.txt’</strong> if that file exists in the folder containing the image to segment.
The segmented acquisition will be saved in the same folder as the acquisition image, with the suffix <strong>‘_seg-axonmyelin.png’</strong>, in <em>png</em> format, along with the binary axon and myelin segmentation masks (with the suffixes <strong>‘_seg-axon.png’</strong> and <strong>‘_seg-myelin.png’</strong>). In our example, the following output files will be generated: <strong>‘77_seg-axonmyelin.png’</strong>, <strong>‘77_seg-axon.png’</strong> and <strong>‘77_seg-myelin.png’</strong>.</p>
<p>To segment the same image by using the <strong>‘pixel_size_in_micrometer.txt’</strong> file in the folder (i.e. not specifying the pixel size as argument in the command), use the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">axondeepseg</span> <span class="o">-</span><span class="n">t</span> <span class="n">SEM</span> <span class="o">-</span><span class="n">i</span> <span class="n">test_segmentation</span><span class="o">/</span><span class="n">test_sem_image</span><span class="o">/</span><span class="n">image1_sem</span><span class="o">/</span><span class="mf">77.</span><span class="n">png</span>
</pre></div>
</div>
</div>
<div class="section" id="segment-multiple-images-of-the-same-resolution">
<h3>Segment multiple images of the same resolution<a class="headerlink" href="#segment-multiple-images-of-the-same-resolution" title="Permalink to this headline">¶</a></h3>
<p>To segment multiple microscopy images of the same resolution that are located in the same folder, specify the path to the folder in the <strong>-i</strong> argument. For instance, to segment the images in folder <strong>‘test_sem_image/image 1_sem/’</strong> of the test dataset that have a pixel size of 0.07 micrometers, use the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">axondeepseg</span> <span class="o">-</span><span class="n">t</span> <span class="n">SEM</span> <span class="o">-</span><span class="n">i</span> <span class="n">test_segmentation</span><span class="o">/</span><span class="n">test_sem_image</span><span class="o">/</span><span class="n">image</span> <span class="mi">1</span><span class="n">_sem</span><span class="o">/</span> <span class="o">-</span><span class="n">s</span> <span class="mf">0.07</span>
</pre></div>
</div>
<p>To segment multiple images of the same folder and of the same resolution by using the <strong>‘pixel_size_in_micrometer.txt’</strong> file in the folder (i.e. not specifying the pixel size as argument in the command), use the following folder structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">folder_with_samples</span><span class="o">/</span>
<span class="o">----</span> <span class="n">image_1</span><span class="o">.</span><span class="n">png</span>
<span class="o">----</span> <span class="n">image_2</span><span class="o">.</span><span class="n">png</span>
<span class="o">----</span> <span class="n">image_3</span><span class="o">.</span><span class="n">png</span>
<span class="o">----</span> <span class="o">...</span>
<span class="o">----</span> <span class="n">pixel_size_in_micrometer</span><span class="o">.</span><span class="n">txt</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Then, use the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">axondeepseg</span> <span class="o">-</span><span class="n">t</span> <span class="n">SEM</span> <span class="o">-</span><span class="n">i</span> <span class="n">test_segmentation</span><span class="o">/</span><span class="n">test_sem_image</span><span class="o">/</span><span class="n">image</span> <span class="mi">1</span><span class="n">_sem</span><span class="o">/</span>
</pre></div>
</div>
</div>
<div class="section" id="segment-images-from-multiple-folders">
<h3>Segment images from multiple folders<a class="headerlink" href="#segment-images-from-multiple-folders" title="Permalink to this headline">¶</a></h3>
<p>To segment images that are located in different folders, specify the path to the folders in the <strong>-i</strong> argument, one after the other. For instance, to segment all the images of folders <strong>‘test_sem_image/image 1_sem/’</strong> and <strong>‘test_sem_image/image 2_sem/’</strong> of the test dataset, use the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">axondeepseg</span> <span class="o">-</span><span class="n">t</span> <span class="n">SEM</span> <span class="o">-</span><span class="n">i</span> <span class="n">test_segmentation</span><span class="o">/</span><span class="n">test_sem_image</span><span class="o">/</span><span class="n">image</span> <span class="mi">1</span><span class="n">_sem</span><span class="o">/</span> <span class="n">test_segmentation</span><span class="o">/</span><span class="n">test_sem_image</span><span class="o">/</span><span class="n">image</span> <span class="mi">2</span><span class="n">_sem</span><span class="o">/</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="jupyter-notebooks">
<h2>Jupyter notebooks<a class="headerlink" href="#jupyter-notebooks" title="Permalink to this headline">¶</a></h2>
<p>Here is a list of useful Jupyter notebooks available with AxonDeepSeg:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><a class="reference external" href="https://github.com/neuropoly/axondeepseg/blob/master/notebooks/getting_started.ipynb">getting_started.ipynb.ipynb</a>:</dt>
<dd>Notebook that shows how to perform axon and myelin segmentation of a given sample using a Jupyter notebook (i.e. not using the command line tool of AxonDeepSeg). You can also launch this specific notebook without installing and/or cloning the repository by using the <a class="reference external" href="https://mybinder.org/v2/gh/neuropoly/axondeepseg/master?filepath=notebooks%2Fgetting_started.ipynb">Binder link</a>.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><a class="reference external" href="https://github.com/neuropoly/axondeepseg/blob/master/notebooks/performance_metrics.ipynb">performance_metrics.ipynb</a>:</dt>
<dd>Notebook that computes a large set of segmentation metrics to assess the axon and myelin segmentation quality of a given sample (compared against a ground truth mask). Metrics include sensitivity, specificity, precision, accuracy, Dice, Jaccard, F1 score, Hausdorff distance.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><a class="reference external" href="https://github.com/neuropoly/axondeepseg/blob/master/notebooks/noise_simulation.ipynb">noise_simulation.ipynb</a>:</dt>
<dd>Notebook that simulates various noise/brightness/contrast effects on a given microscopy image in order to assess the robustness of AxonDeepSeg.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><a class="reference external" href="https://github.com/neuropoly/axondeepseg/blob/master/notebooks/morphometrics_extraction.ipynb">morphometrics_extraction.ipynb</a>:</dt>
<dd>Notebook that shows how to extract morphometrics from a sample segmented with AxonDeepSeg. The user can extract and save morphometrics for each axon (diameter, solidity, ellipticity, centroid, …), estimate aggregate morphometrics of the sample from the axon/myelin segmentation (g-ratio, AVF, MVF, myelin thickness, axon density, …), and generate overlays of axon/myelin segmentation masks, colocoded for axon diameter.</dd>
</dl>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If it is the first time, install the Jupyter notebook package in the terminal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">jupyter</span>
</pre></div>
</div>
<p>Then, go to the notebooks/ subfolder of AxonDeepSeg and launch a particular notebook as follows:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">notebooks</span>
<span class="n">jupyter</span> <span class="n">notebook</span> <span class="n">name_of_the_notebook</span><span class="o">.</span><span class="n">ipynb</span>
</pre></div>
</div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>The current models available for segmentation are trained for patches of 512x512 pixels. This means that your input image(s) should be at least 512x512 pixels in size <strong>after the resampling to the target pixel size of the model you are using to segment</strong>.</p>
<p>For instance, the TEM model currently available has a target resolution of 0.01 micrometers per pixel, which means that the minimum size of the input image (in micrometers) is 5.12x5.12.</p>
<p class="last"><strong>Option:</strong> If your image to segment is too small, you can use padding to artificially increase its size (i.e. add empty pixels around the borders).</p>
</div>
</div>
</div>
<div class="section" id="help">
<h1>Help<a class="headerlink" href="#help" title="Permalink to this headline">¶</a></h1>
<p>If you experience issues during installation and/or use of AxonDeepSeg, you can post a new issue on the <a class="reference external" href="https://github.com/neuropoly/axondeepseg/issues">AxonDeepSeg GitHub issues webpage</a>. We will reply to you as soon as possible.</p>
<div class="section" id="manual-correction">
<h2>Manual correction<a class="headerlink" href="#manual-correction" title="Permalink to this headline">¶</a></h2>
<p>If the segmentation with AxonDeepSeg fails or does not give optimal results, you can try one of the following options:</p>
<p><strong>Option 1: manual correction of the segmentation masks</strong></p>
<ul class="simple">
<li>Note that when you launch a segmentation, in the folder output, you will also find the axon and myelin masks (with the suffixes <strong>‘_seg-axon.png’</strong> and <strong>‘_seg-myelin.png’</strong>). If the segmentation proposed by AxonDeepSeg is not optimal, you can manually correct the myelin mask.</li>
<li>For the manual correction, we suggest using the GIMP software (<a class="reference external" href="https://www.gimp.org/">https://www.gimp.org/</a>). For a more detailed procedure on how to do the manual correction with GIMP, please consult the following link: <a class="reference external" href="https://docs.google.com/document/d/10E6gzMP6BNGJ_7Y5PkDFmum34U-IcbMi8AvRruhIzvM/edit">Manual labelling with GIMP</a>.</li>
<li>After correcting the myelin mask, you can regenerate the segmentation masks (axon+myelin). To do this, you can use the following notebook: <a class="reference external" href="https://github.com/neuropoly/axondeepseg/blob/master/notebooks/generate_axons_from_myelin.ipynb">https://github.com/neuropoly/axondeepseg/blob/master/notebooks/generate_axons_from_myelin.ipynb</a>.</li>
</ul>
<p><strong>Option 2: manual correction combined with *AxonSeg* software</strong></p>
<ul class="simple">
<li>Manually correct the axon mask (as explained in Option 1).</li>
<li>Use the <a class="reference external" href="https://github.com/neuropoly/axonseg">AxonSeg</a> software to segment the myelin from the axon mask. In order to do this, install AxonSeg, and then follow the instructions in part 5 of the <a class="reference external" href="https://github.com/neuropoly/axonseg/blob/master/as_tutorial.m">as_tutorial guideline</a>.</li>
</ul>
</div>
</div>
<div class="section" id="citation">
<h1>Citation<a class="headerlink" href="#citation" title="Permalink to this headline">¶</a></h1>
<p>If you use this work in your research, please cite:</p>
<p>Zaimi, A., Wabartha, M., Herman, V., Antonsanti, P.-L., Perone, C. S., &amp; Cohen-Adad, J. (2018). AxonDeepSeg: automatic axon and myelin segmentation from microscopy data using convolutional neural networks. Scientific Reports, 8(1), 3816. <a class="reference external" href="https://doi.org/10.1038/s41598-018-22181-4">Link to the paper</a>.</p>
</div>
<div class="section" id="licensing">
<h1>Licensing<a class="headerlink" href="#licensing" title="Permalink to this headline">¶</a></h1>
<p>The MIT License (MIT)</p>
<p>Copyright (c) 2018 NeuroPoly, École Polytechnique, Université de Montréal</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the “Software”), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</p>
</div>
<div class="section" id="contributors">
<h1>Contributors<a class="headerlink" href="#contributors" title="Permalink to this headline">¶</a></h1>
<p>Pierre-Louis Antonsanti, Julien Cohen-Adad, Victor Herman, Christian Perone, Maxime Wabartha, Aldo Zaimi</p>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="index.html" class="btn btn-neutral" title="Welcome to AxonDeepSeg !" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, NeuroPoly.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>